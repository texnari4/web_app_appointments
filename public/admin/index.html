<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin · Masters</title>
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
      color:#0b0b0f;background:#f5f7fb;margin:0;padding:24px;}
    .card{background:#fff;border-radius:16px;box-shadow:0 2px 12px rgba(0,0,0,.06);padding:20px;max-width:760px;margin:auto;}
    h1{font-size:20px;margin:0 0 16px}
    .row{display:flex;gap:8px;margin:12px 0}
    input,button{font-size:14px;padding:10px 12px;border-radius:10px;border:1px solid #e6e6ea}
    button{cursor:pointer;border:0;background:#007aff;color:#fff}
    ul{list-style:none;padding:0;margin:0}
    li{padding:10px 0;border-bottom:1px solid #f0f0f3}
  </style>
</head>
<body>
<div class="card">
  <h1>Мастера</h1>
  <div class="row">
    <input id="name" placeholder="Имя мастера" />
    <button id="create">Создать</button>
  </div>
  <ul id="list"></ul>
</div>
<script>
async function load() {
  const r = await fetch('/api/masters');
  const j = await r.json();
  const ul = document.getElementById('list');
  ul.innerHTML = '';
  if (j.ok) {
     for (const m of j.data) {
        const li = document.createElement('li');
        li.textContent = m.name + (m.isActive ? '' : ' (inactive)');
        ul.appendChild(li);
     }
  } else {
     ul.innerHTML = '<li>Ошибка загрузки</li>';
  }
}
document.getElementById('create').addEventListener('click', async () => {
  const name = document.getElementById('name').value.trim();
  if (!name) return;
  const r = await fetch('/api/masters', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ name })});
  if (r.ok) { document.getElementById('name').value=''; await load(); }
  else { alert('Не удалось создать мастера'); }
});
load();
</script>
</body>
</html>
